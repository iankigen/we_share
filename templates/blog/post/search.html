{% extends 'blog/base.html' %}

{% block title %}Search{% endblock %}

{% block content %}
    <div>
        <h1>Search</h1>
        <form action="." method="get">
            {{ form.as_p }}
            <input type="submit" value="Search">
        </form>
    </div>
    {% if 'query' in request.GET %}
        <div>
            <h1>Posts containig: {{ data.query }}</h1>
            <h3>Found {{ total_results }} result{{ total_results|pluralize }}</h3>
            {% for result in results %}
                {% with post=result.object %}
                    <h4>
                        <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                    </h4>
                    {{ post.body|truncatewords:5 }}
                {% endwith %}
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}